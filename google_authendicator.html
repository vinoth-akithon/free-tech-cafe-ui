<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Google Auth</title>
  </head>
  <body style="background-color: rgb(234, 241, 241); box-sizing: border-box">
    <div
      style="
        margin: auto;
        /* margin-top: 20%; */
        width: 100%;
        border: 2px solid red;
        background-color: rgb(182, 240, 76);
        font-size: medium;
      "
    >
      <h1 style="text-align: center">Instructions!</h1>
      <ul
        style="
          text-align: left;
          padding: 20px;
          margin: auto;
          width: 50%;
          font-size: larger;
          text-align: justify;
          padding-left: 15%;
          line-height: 25px;
        "
      >
        <li>
          Download
          <a
            href="https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&hl=en&gl=US"
            target="_blank"
            >Google Authenticator</a
          >
          on your mobile.
        </li>
        <li>
          Create a new account with either <strong>setup key</strong> method or
          <strong>scan QR</strong> method
        </li>
        <li>
          Copy and paste the below provided secret key in app or scan the QR
          code below here.
        </li>
        <li>Select time-based authentication.</li>
        <li>Click <strong> 'Take me to Login' </strong> button.</li>
        <li>
          Submit the generated key(OTP) in the <strong> login form</strong>.
        </li>
        <br />
      </ul>
    </div>
    <br />
    <br />
    <br />
    <br />
    <div
      class="secret-key"
      style="
        margin: auto;
        /* margin-top: 20%; */
        width: 100%;
        border: 2px solid red;
        background-color: rgb(198, 206, 206);
      "
    >
      <h1 style="text-align: center; margin: auto">Copy Secret Key</h1>
      <br />
      <h1
        id="secret"
        style="
          color: blue;
          font-size: 3vw;
          text-align: center;
          font-family: Verdana, Geneva, Tahoma, sans-serif;
          margin: auto;
        "
      ></h1>
      <br />
    </div>
    <br />
    <br />
    <div>
      <h1 style="text-align: center">or</h1>
    </div>
    <br />
    <br />

    <div
      class="qrcode"
      style="
        width: auto;
        border: 2px solid red;
        background-color: rgb(198, 206, 206);
      "
    >
      <h1 style="text-align: center">Scan QR Code</h1>
      <div
        style="
          border: 2px solid red;
          width: 150px;
          height: 150px;
          margin: auto;
          margin-bottom: 25px;
        "
      >
        <img id="qrcode" src="" alt="qrcode" />
        <!-- <iframe id="qrcode" src="" frameborder="0"></iframe> -->
        <!-- <embed id="qrcode" src="" type="" /> -->
      </div>
    </div>

    <div style="margin: auto; margin-top: 50px">
      <button
        id="login-button"
        style="
          text-align: center;
          background-color: rgb(19, 26, 235);
          padding: 20px;
          /* margin: auto; */
          /* width: 80%; */
          margin-left: 25%;
          border-radius: 100px;
          margin-right: 20%;
          width: 50%;
          font-size: x-large;
          font-family: Verdana, Geneva, Tahoma, sans-serif;
          font-weight: bold;
          color: rgb(231, 240, 227);
          cursor: pointer;
        "
      >
        Take Me to Login
      </button>
    </div>

    <script>
      let params = new URL(document.location).searchParams;
      let secret_key = params.get("google_key");
      let qrcode_uri = params.get("qrcode_uri");

      document.getElementById("secret").innerHTML = params.get("secret_key");
      document.getElementById("qrcode").src =
        "https://chart.googleapis.com/chart?chs=150x150&cht=qr&chl=" +
        params.get("qrcode_uri") +
        "&issuer=" +
        params.get("issuer");
    </script>

    <script>
      //   window.addEventListener("load", function () {
      const login = document.getElementById("login-button");
      login.addEventListener("click", function (event) {
        event.preventDefault();
        window.location.replace("login-copy.html");
      });
      //   });
    </script>
  </body>
</html>
